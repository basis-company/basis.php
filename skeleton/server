#!/usr/local/bin/php
<?php

include "vendor/autoload.php";

Amp\Loop::run(function () {
    $app = new Basis\Application();

    $logger = $app->get(Psr\Log\LoggerInterface::class);
    $server = $app->get(Amp\Http\Server\HttpServer::class);

    $logger->info([ 'msg' => 'application created!' ]);
    yield $server->start();

    $logger = $app->get(Psr\Log\LoggerInterface::class);
    $logger->info([ 'msg' => 'server started' ]);
});